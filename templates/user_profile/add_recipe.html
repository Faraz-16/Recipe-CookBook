{% extends './my_recipes.html' %}
{% load static %}


{% block content %}
  {% if Success %}
    <div class="row">
      <div class="center-align">
        <h3>{{Success}}</h3>
      </div>
    </div>
  {% endif %}
	      <div class="row ">
          <form class="col s6 offset-s3 card-panel red lighten-1 " enctype="multipart/form-data" action="" method="POST">
          	{% csrf_token %}
            <div class="row">
              <div class="col s4 offset-s4" style="text-align: center;">
                <h4>Add Recipe</h4>
              </div>
            </div>
            <div class="row ">
              <div class="input-field col s6">
                <input name="recipe_name" id="recipe_name" type="text" class="validate" required="">
                <label for="recipe_name">Recipe Name</label>
              </div>
              <div class="input-field col s6">
                <input name="image" id="image" type="file" class="validate" required="">
                <label for="image">Upload Image</label>
              </div>
            </div>
            <div id='con'>
              <div class="child" id="r0">
                <div class="row">
                  <div class="input-field col s3">
                    <input name="ind_name" id="ind_name" type="text" class="validate" required="">
                    <label for="ind_name">Ingredient Name</label>
                  </div>
                  <div class="input-field col s3">
                    <input name="ind_quant" id="ind_quant" type="text" class="validate" required="">
                    <label for="ind_quant">Quantity</label>
                  </div>
                  <div class="input-field col s3">
                    <input name="ind_unit" id="ind_unit" type="text" class="validate" required="">
                    <label for="ind_unit">Units</label>
                  </div>
                  <div class="col s3"><p><a href="#" onclick="del(r0)">Remove</a></p></div>
                </div>
              </div>
            </div>
            <p><a href="#" id="addnew">Add Another Ingredient</a></p>
            <div class="row">
              <div class="input-field col s6">
                <input name="content" id="content" type="textarea" rows=5 class="validate" required="">
                <label for="content">Preparation</label>
              </div>
            </div>
            <div class="row">
              <div class="col s12">
                  <button class="btn waves-effect waves-light" type="submit" name="action">Submit
                    <i class="material-icons right">send</i>
                  </button>
              </div>
            </div>
          </form>
        </div>
      <script type="text/javascript" src={% static 'js/materialize.min.js' %}></script>
      <script type="text/javascript" src={% static 'js/lib/jquery-3.1.1.js' %}></script>
      <script >
        var count=0;
        $("#addnew").click(function(){
          count+=1;
        $("#con").append(addNewRow());
        });

        function addNewRow(){
          var newrow='<div class="child" id="r'+count+'"><div class="row" ><div class="input-field col s3"><input name="ind_name" id="ind_name" type="text" class="validate" required=""><label for="ind_name">Ingredient Name</label></div><div class="input-field col s3"><input name="ind_quant" id="ind_quant" type="text" class="validate" required=""><label for="ind_quant">Quantity</label>'+
            '</div><div class="input-field col s3"><input name="ind_unit" id="ind_unit" type="text" class="validate" required=""><label for="ind_unit">Units</label></div><div class="col s3"><p><a href="#" onclick="del(r'+count+')">Remove</a></p></div></div></div>';
          return newrow;
        };
        function del(row){
          console.log(row);
          $(row).remove();
        }
      </script>

{% endblock %}